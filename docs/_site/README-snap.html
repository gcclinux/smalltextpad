<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Snap Build Guide - SmallTextPad | SmallTextPad</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Snap Build Guide - SmallTextPad" />
<meta name="author" content="Ricardo Wagemaker" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A lightweight Java text editor with encryption and multi-language support" />
<meta property="og:description" content="A lightweight Java text editor with encryption and multi-language support" />
<link rel="canonical" href="http://localhost:4000/README-snap.html" />
<meta property="og:url" content="http://localhost:4000/README-snap.html" />
<meta property="og:site_name" content="SmallTextPad" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Snap Build Guide - SmallTextPad" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Ricardo Wagemaker"},"description":"A lightweight Java text editor with encryption and multi-language support","headline":"Snap Build Guide - SmallTextPad","url":"http://localhost:4000/README-snap.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">Snap Build Guide - SmallTextPad</h1>
      <h2 class="project-tagline">A lightweight Java text editor with encryption and multi-language support</h2>
      
      
        <a href="" class="btn">Download .zip</a>
        <a href="" class="btn">Download .tar.gz</a>
      
    </header>

    <main id="content" class="main-content" role="main">
      <p><a href="index.html">← Back to Home</a></p>

<h1 id="snap-packaging-for-smalltextpad">Snap Packaging for SmallTextPad</h1>

<p>This guide covers building Snap packages for SmallTextPad, a lightweight Java text editor with encryption and multi-language support.</p>

<h2 id="files">Files</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">../snap/snapcraft.yaml</code> - Snap package definition and configuration</li>
  <li><code class="language-plaintext highlighter-rouge">../snap/gui/smalltextpad.desktop</code> - Desktop integration file</li>
  <li><code class="language-plaintext highlighter-rouge">build-snap.sh</code> - Helper script to build the Snap package</li>
  <li><code class="language-plaintext highlighter-rouge">README-snap.md</code> - This documentation file</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<h3 id="system-requirements">System Requirements</h3>
<ul>
  <li>Linux system (Ubuntu, Fedora, Debian, etc.)</li>
  <li>Snapcraft tool installed</li>
  <li>Java 21+ JDK for building the JAR</li>
  <li>Snapd for testing (optional)</li>
</ul>

<h3 id="installing-build-dependencies">Installing Build Dependencies</h3>

<p><strong>Ubuntu/Debian:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>snapcraft openjdk-21-jdk
</code></pre></div></div>

<p><strong>Fedora/RHEL:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dnf <span class="nb">install </span>snapd openjdk-21-jdk
<span class="nb">sudo ln</span> <span class="nt">-s</span> /var/lib/snapd/snap /snap  <span class="c"># Enable classic snap support</span>
<span class="nb">sudo </span>systemctl <span class="nb">enable</span> <span class="nt">--now</span> snapd.socket
<span class="c"># Install snapcraft</span>
<span class="nb">sudo </span>snap <span class="nb">install </span>snapcraft <span class="nt">--classic</span>
</code></pre></div></div>

<p><strong>Other Distributions:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install snapd first (varies by distribution)</span>
<span class="c"># Then install snapcraft</span>
<span class="nb">sudo </span>snap <span class="nb">install </span>snapcraft <span class="nt">--classic</span>
</code></pre></div></div>

<h2 id="building-the-snap-package">Building the Snap Package</h2>

<h3 id="standard-build">Standard Build:</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>packaging
./build-snap.sh
</code></pre></div></div>

<h3 id="build-on-systems-without-lxd-eg-raspberry-pi">Build on Systems Without LXD (e.g., Raspberry Pi):</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snapcraft pack <span class="nt">--destructive-mode</span>
</code></pre></div></div>

<p>The script will:</p>
<ol>
  <li>Clean previous build artifacts</li>
  <li>Rebuild the source list</li>
  <li>Compile Java sources</li>
  <li>Create the JAR file</li>
  <li>Package everything as a Snap with <code class="language-plaintext highlighter-rouge">snapcraft pack</code></li>
</ol>

<h2 id="package-details">Package Details</h2>

<h3 id="package-information">Package Information</h3>
<ul>
  <li><strong>Name:</strong> smalltextpad</li>
  <li><strong>Version:</strong> 1.5.0</li>
  <li><strong>Base:</strong> core22 (Ubuntu 22.04 LTS)</li>
  <li><strong>Architecture:</strong> Currently configured for arm64, but can be built for other architectures</li>
  <li><strong>Confinement:</strong> strict (sandboxed for security)</li>
  <li><strong>Grade:</strong> stable</li>
</ul>

<h3 id="snap-configuration">Snap Configuration</h3>
<p>The snap includes:</p>
<ul>
  <li><strong>Java Runtime:</strong> OpenJDK 17 JRE (bundled)</li>
  <li><strong>Application JAR:</strong> Pre-compiled SmallTextPad.jar</li>
  <li><strong>Resources:</strong> Images, dictionaries, and language files</li>
  <li><strong>Desktop Integration:</strong> Application menu entry and icon</li>
</ul>

<h3 id="permissions-plugs">Permissions (Plugs)</h3>
<p>The snap requests the following permissions:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">home</code> - Access to user’s home directory</li>
  <li><code class="language-plaintext highlighter-rouge">desktop</code> - Desktop environment integration</li>
  <li><code class="language-plaintext highlighter-rouge">desktop-legacy</code> - Legacy desktop support</li>
  <li><code class="language-plaintext highlighter-rouge">wayland</code> - Wayland display server</li>
  <li><code class="language-plaintext highlighter-rouge">x11</code> - X11 display server</li>
  <li><code class="language-plaintext highlighter-rouge">unity7</code> - Unity desktop support</li>
  <li><code class="language-plaintext highlighter-rouge">opengl</code> - OpenGL graphics</li>
  <li><code class="language-plaintext highlighter-rouge">removable-media</code> - Access to USB drives and external storage</li>
</ul>

<h2 id="build-output">Build Output</h2>

<p>After successful build:</p>
<ul>
  <li><strong>Snap package:</strong> <code class="language-plaintext highlighter-rouge">classes/artifacts/smalltextpad_1.5.0_amd64.snap</code> (or arm64)</li>
  <li><strong>JAR file:</strong> <code class="language-plaintext highlighter-rouge">classes/artifacts/SmallTextPad.jar</code> (intermediate build artifact)</li>
</ul>

<h2 id="installing-the-snap">Installing the Snap</h2>

<h3 id="install-locally-development">Install Locally (Development):</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>snap <span class="nb">install</span> <span class="nt">--dangerous</span> classes/artifacts/smalltextpad_1.5.0_<span class="k">*</span>.snap
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">--dangerous</code> flag is required for local snaps that aren’t signed by the Snap Store.</p>

<h3 id="install-from-snap-store-when-published">Install from Snap Store (When Published):</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>snap <span class="nb">install </span>smalltextpad
</code></pre></div></div>

<h2 id="using-the-application">Using the Application</h2>

<p>Once installed, you can:</p>

<ol>
  <li><strong>Launch from application menu:</strong> Look for “SmallTextPad” in your applications</li>
  <li><strong>Launch from command line:</strong> <code class="language-plaintext highlighter-rouge">smalltextpad</code></li>
  <li><strong>Open files:</strong> <code class="language-plaintext highlighter-rouge">smalltextpad /path/to/file.txt</code></li>
</ol>

<h2 id="snap-specific-features">Snap-Specific Features</h2>

<h3 id="confinement">Confinement</h3>
<p>The snap runs in strict confinement mode, which means:</p>
<ul>
  <li>It has limited access to system resources</li>
  <li>File access is restricted to home directory and removable media</li>
  <li>More secure than classic confinement</li>
</ul>

<h3 id="auto-updates">Auto-Updates</h3>
<p>When installed from the Snap Store, the application will:</p>
<ul>
  <li>Update automatically in the background</li>
  <li>Always run the latest stable version</li>
  <li>Preserve user data during updates</li>
</ul>

<h3 id="snap-commands">Snap Commands</h3>

<p><strong>Check snap info:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snap info smalltextpad
</code></pre></div></div>

<p><strong>View snap connections:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snap connections smalltextpad
</code></pre></div></div>

<p><strong>Remove the snap:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>snap remove smalltextpad
</code></pre></div></div>

<p><strong>Connect additional interfaces (if needed):</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>snap connect smalltextpad:removable-media
</code></pre></div></div>

<h2 id="publishing-to-snap-store">Publishing to Snap Store</h2>

<p>To publish SmallTextPad to the Snap Store:</p>

<ol>
  <li><strong>Register the snap name:</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snapcraft register smalltextpad
</code></pre></div>    </div>
  </li>
  <li><strong>Build and upload:</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snapcraft
snapcraft upload <span class="nt">--release</span><span class="o">=</span>stable smalltextpad_1.5.0_amd64.snap
</code></pre></div>    </div>
  </li>
  <li><strong>Automated publishing:</strong>
    <ul>
      <li>The project can use GitHub Actions or other CI/CD</li>
      <li>Upload to Snap Store happens automatically on release</li>
    </ul>
  </li>
</ol>

<h2 id="multi-architecture-support">Multi-Architecture Support</h2>

<h3 id="building-for-different-architectures">Building for Different Architectures:</h3>

<p><strong>For amd64 (x86_64):</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">architectures</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">build-on</span><span class="pi">:</span> <span class="s">amd64</span>
</code></pre></div></div>

<p><strong>For arm64 (ARM64/aarch64):</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">architectures</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">build-on</span><span class="pi">:</span> <span class="s">arm64</span>
</code></pre></div></div>

<p><strong>For multiple architectures:</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">architectures</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">build-on</span><span class="pi">:</span> <span class="s">amd64</span>
  <span class="pi">-</span> <span class="na">build-on</span><span class="pi">:</span> <span class="s">arm64</span>
  <span class="pi">-</span> <span class="na">build-on</span><span class="pi">:</span> <span class="s">armhf</span>
</code></pre></div></div>

<p>Edit <code class="language-plaintext highlighter-rouge">snap/snapcraft.yaml</code> to modify the architecture settings.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="snapcraft-not-found">Snapcraft Not Found:</h3>
<p>Install snapcraft:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>snap <span class="nb">install </span>snapcraft <span class="nt">--classic</span>
</code></pre></div></div>

<h3 id="lxdmultipass-issues">LXD/Multipass Issues:</h3>
<p>Use destructive mode (builds directly on host):</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snapcraft pack <span class="nt">--destructive-mode</span> <span class="nt">--output</span><span class="o">=</span>classes/artifacts/smalltextpad_1.5.0_amd64.snap
</code></pre></div></div>

<h3 id="permission-denied-errors">Permission Denied Errors:</h3>
<p>Ensure the build script is executable:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x packaging/build-snap.sh
</code></pre></div></div>

<h3 id="jar-not-found">JAR Not Found:</h3>
<p>The snap build expects a pre-built JAR. Build it first:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./packaging/build-jar.sh
</code></pre></div></div>

<h3 id="desktop-file-not-showing">Desktop File Not Showing:</h3>
<p>Check that the desktop file exists:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>snap/gui/smalltextpad.desktop
</code></pre></div></div>

<h3 id="application-wont-start">Application Won’t Start:</h3>
<p>Check snap logs:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snap logs smalltextpad <span class="nt">-f</span>
</code></pre></div></div>

<h2 id="snap-package-structure">Snap Package Structure</h2>

<p>Inside the snap:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/snap/smalltextpad/current/
├── SmallTextPad.jar          # Application JAR
├── res/                       # Image resources
├── dic/                       # Dictionary files
├── bin/
│   └── smalltextpad          # Wrapper script
└── usr/
    ├── lib/jvm/              # Bundled Java runtime
    └── share/
        ├── applications/      # Desktop file
        └── pixmaps/          # Application icon
</code></pre></div></div>

<h2 id="development-notes">Development Notes</h2>

<ul>
  <li>The snap uses a wrapper script that:
    <ul>
      <li>Locates the bundled Java runtime</li>
      <li>Sets the DISPLAY environment variable</li>
      <li>Executes the JAR with proper arguments</li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">override-build</code> section in snapcraft.yaml:
    <ul>
      <li>Creates the wrapper script</li>
      <li>Copies the pre-built JAR and resources</li>
      <li>Installs desktop integration files</li>
    </ul>
  </li>
  <li>The snap bundles OpenJDK 17 JRE (from Ubuntu 22.04 repos)
    <ul>
      <li>Users don’t need Java installed</li>
      <li>Application is truly self-contained</li>
    </ul>
  </li>
</ul>

<h2 id="testing">Testing</h2>

<p>Before publishing, test the snap thoroughly:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install locally</span>
<span class="nb">sudo </span>snap <span class="nb">install</span> <span class="nt">--dangerous</span> classes/artifacts/smalltextpad_<span class="k">*</span>.snap

<span class="c"># Test launching</span>
smalltextpad

<span class="c"># Test with file</span>
smalltextpad test.txt

<span class="c"># Test file associations</span>
xdg-mime query default text/plain

<span class="c"># Check permissions</span>
snap connections smalltextpad

<span class="c"># View logs</span>
snap logs smalltextpad
</code></pre></div></div>

<h2 id="see-also">See Also</h2>

<ul>
  <li><a href="README-jar.html">JAR Build Guide</a> - Building standalone JAR files</li>
  <li><a href="README-rpm.html">RPM Build Guide</a> - Building RPM packages for Fedora/RHEL</li>
  <li><a href="README-windows.html">Windows Build Guide</a> - Building Windows installers</li>
  <li><a href="index.html">Back to Home</a> - Main documentation and downloads</li>
  <li><a href="https://snapcraft.io/docs">Snapcraft Documentation</a> - Official Snapcraft documentation</li>
  <li><a href="https://snapcraft.io/docs/releasing-your-app">Publishing to Snap Store</a> - Publishing guide</li>
</ul>


      <footer class="site-footer">
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
